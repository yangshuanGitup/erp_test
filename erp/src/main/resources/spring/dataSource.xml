<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:context="http://www.springframework.org/schema/context"
	xmlns:jee="http://www.springframework.org/schema/jee" xmlns:p="http://www.springframework.org/schema/p"
	xmlns:tx="http://www.springframework.org/schema/tx" xmlns:util="http://www.springframework.org/schema/util"
	xmlns:mvc="http://www.springframework.org/schema/mvc" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="
	http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.2.xsd 
	http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.2.xsd 
	http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-4.2.xsd 
	http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-4.2.xsd 
	http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-4.2.xsd 
	http://www.springframework.org/schema/mvc  
	http://www.springframework.org/schema/mvc/spring-mvc-4.2.xsd
	">
	
	<!--数据源设置 -->
  <bean id = "propertyConfigurer" class ="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">  
       <property name = "locations">  
           <list>  
                 <value>classpath:/property/dbconfig.properties</value>
            </list>  
        </property>  
    </bean>
    <!-- 阿里 druid 数据库连接池 -->
    <bean id = "dataSource" class = "com.alibaba.druid.pool.DruidDataSource" destroy-method ="close">  
         <!-- 数据库基本信息配置 -->
         <property name = "url" value = "${url}" />  
         <property name = "username" value = "${username}" />  
         <property name = "password" value = "${password}" />  
         <property name = "driverClassName" value = "${driverClassName}" />  
         <property name = "filters" value = "${filters}" />  

          <!-- 最大并发连接数 -->
         <property name = "maxActive" value = "${maxActive}" />

         <!-- 初始化连接数量 -->
         <property name = "initialSize" value = "${initialSize}" />

         <!-- 配置获取连接等待超时的时间 -->
         <property name = "maxWait" value = "${maxWait}" />

         <!-- 最小空闲连接数 -->
         <property name = "minIdle" value = "${minIdle}" />  

          <!-- 配置间隔多久才进行一次检测，检测需要关闭的空闲连接，单位是毫秒 -->
         <property name = "timeBetweenEvictionRunsMillis" value ="${timeBetweenEvictionRunsMillis}" />

         <!-- 配置一个连接在池中最小生存的时间，单位是毫秒 -->
         <property name = "minEvictableIdleTimeMillis" value ="${minEvictableIdleTimeMillis}" />  

         <property name = "validationQuery" value = "${validationQuery}" />  
         <property name = "testWhileIdle" value = "${testWhileIdle}" />  
         <property name = "testOnBorrow" value = "${testOnBorrow}" />  
         <property name = "testOnReturn" value = "${testOnReturn}" />  
         <property name = "maxOpenPreparedStatements" value ="${maxOpenPreparedStatements}" />

         <!-- 打开 removeAbandoned 功能 -->
         <property name = "removeAbandoned" value = "${removeAbandoned}" />

         <!-- 1800 秒，也就是 30 分钟 -->
         <property name = "removeAbandonedTimeout" value ="${removeAbandonedTimeout}" />

         <!-- 关闭 abanded 连接时输出错误日志 -->   
         <property name = "logAbandoned" value = "${logAbandoned}" />
    </bean>	
    
	<!--数据源设置,测试库test -->
    <!-- 阿里 druid 数据库连接池 -->
    <bean id = "dataSource_test" class = "com.alibaba.druid.pool.DruidDataSource" destroy-method ="close">  
         <!-- 数据库基本信息配置 -->
         <property name = "url" value = "${test_url}" />  
         <property name = "username" value = "${test_username}" />  
         <property name = "password" value = "${test_password}" />  
         <property name = "driverClassName" value = "${test_driverClassName}" />  
         <property name = "filters" value = "${test_filters}" />  

          <!-- 最大并发连接数 -->
         <property name = "maxActive" value = "${test_maxActive}" />

         <!-- 初始化连接数量 -->
         <property name = "initialSize" value = "${test_initialSize}" />

         <!-- 配置获取连接等待超时的时间 -->
         <property name = "maxWait" value = "${test_maxWait}" />

         <!-- 最小空闲连接数 -->
         <property name = "minIdle" value = "${test_minIdle}" />  

          <!-- 配置间隔多久才进行一次检测，检测需要关闭的空闲连接，单位是毫秒 -->
         <property name = "timeBetweenEvictionRunsMillis" value ="${test_timeBetweenEvictionRunsMillis}" />

         <!-- 配置一个连接在池中最小生存的时间，单位是毫秒 -->
         <property name = "minEvictableIdleTimeMillis" value ="${test_minEvictableIdleTimeMillis}" />  

         <property name = "validationQuery" value = "${test_validationQuery}" />  
         <property name = "testWhileIdle" value = "${test_testWhileIdle}" />  
         <property name = "testOnBorrow" value = "${test_testOnBorrow}" />  
         <property name = "testOnReturn" value = "${test_testOnReturn}" />  
         <property name = "maxOpenPreparedStatements" value ="${test_maxOpenPreparedStatements}" />

         <!-- 打开 removeAbandoned 功能 -->
         <property name = "removeAbandoned" value = "${test_removeAbandoned}" />

         <!-- 1800 秒，也就是 30 分钟 -->
         <property name = "removeAbandonedTimeout" value ="${test_removeAbandonedTimeout}" />

         <!-- 关闭 abanded 连接时输出错误日志 -->   
         <property name = "logAbandoned" value = "${test_logAbandoned}" />
    </bean>	    
</beans>